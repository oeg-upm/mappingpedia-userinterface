{% extends "base.html" %}


{%block head%}
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script>

 var properties = ["aaa", "bbb", "ccc"];

  $( function() {
    var labels = [
"APIReference",
"AboutPage",
"AcceptAction",
"Accommodation",
"AccountingService",
"AchieveAction",
"Action",
"ActionStatusType",
"ActivateAction",
"AddAction",
"AdministrativeArea",
"AdultEntertainment",
"AggregateOffer",
"AggregateRating",
"AgreeAction",
"Airline",
"Airport",
"AlignmentObject",
"AllocateAction",
"AmusementPark",
"AnimalShelter",
"Answer",
"Apartment",
"ApartmentComplex",
"AppendAction",
"ApplyAction",
"Aquarium",
"ArriveAction",
"ArtGallery",
"Article",
"AskAction",
"AssessAction",
"AssignAction",
"Attorney",
"Audience",
"AudioObject",
"AuthorizeAction",
"AutoBodyShop",
"AutoDealer",
"AutoPartsStore",
"AutoRental",
"AutoRepair",
"AutoWash",
"AutomatedTeller",
"AutomotiveBusiness",
"Bakery",
"BankAccount",
"BankOrCreditUnion",
"BarOrPub",
"Barcode",
"Beach",
"BeautySalon",
"BedAndBreakfast",
"BedDetails",
"BefriendAction",
"BikeStore",
"Blog",
"BlogPosting",
"BoardingPolicyType",
"BodyOfWater",
"Book",
"BookFormatType",
"BookSeries",
"BookStore",
"BookmarkAction",
"Boolean",
"BorrowAction",
"BowlingAlley",
"Brand",
"BreadcrumbList",
"Brewery",
"Bridge",
"BroadcastChannel",
"BroadcastEvent",
"BroadcastService",
"BuddhistTemple",
"BusReservation",
"BusStation",
"BusStop",
"BusTrip",
"BusinessAudience",
"BusinessEntityType",
"BusinessEvent",
"BusinessFunction",
"BuyAction",
"CableOrSatelliteService",
"CafeOrCoffeeShop",
"Campground",
"CampingPitch",
"Canal",
"CancelAction",
"Car",
"Casino",
"CatholicChurch",
"Cemetery",
"CheckAction",
"CheckInAction",
"CheckOutAction",
"CheckoutPage",
"ChildCare",
"ChildrensEvent",
"ChooseAction",
"Church",
"City",
"CityHall",
"CivicStructure",
"ClaimReview",
"Clip",
"ClothingStore",
"Code",
"CollectionPage",
"CollegeOrUniversity",
"ComedyClub",
"ComedyEvent",
"Comment",
"CommentAction",
"CommunicateAction",
"CompoundPriceSpecification",
"ComputerLanguage",
"ComputerStore",
"ConfirmAction",
"ConsumeAction",
"ContactPage",
"ContactPoint",
"ContactPointOption",
"Continent",
"ControlAction",
"ConvenienceStore",
"Conversation",
"CookAction",
"Corporation",
"Country",
"Course",
"CourseInstance",
"Courthouse",
"CreateAction",
"CreativeWork",
"CreativeWorkSeason",
"CreativeWorkSeries",
"CreditCard",
"Crematorium",
"CurrencyConversionService",
"DanceEvent",
"DanceGroup",
"DataCatalog",
"DataDownload",
"DataFeed",
"DataFeedItem",
"DataType",
"Dataset",
"Date",
"DateTime",
"DatedMoneySpecification",
"DayOfWeek",
"DaySpa",
"DeactivateAction",
"DefenceEstablishment",
"DeleteAction",
"DeliveryChargeSpecification",
"DeliveryEvent",
"DeliveryMethod",
"Demand",
"Dentist",
"DepartAction",
"DepartmentStore",
"DepositAccount",
"DigitalDocument",
"DigitalDocumentPermission",
"DigitalDocumentPermissionType",
"DisagreeAction",
"DiscoverAction",
"DiscussionForumPosting",
"DislikeAction",
"Distance",
"DonateAction",
"DownloadAction",
"DrawAction",
"DrinkAction",
"DriveWheelConfigurationValue",
"DryCleaningOrLaundry",
"Duration",
"EatAction",
"EducationEvent",
"EducationalAudience",
"EducationalOrganization",
"Electrician",
"ElectronicsStore",
"ElementarySchool",
"EmailMessage",
"Embassy",
"EmergencyService",
"EmployeeRole",
"EmploymentAgency",
"EndorseAction",
"Energy",
"EngineSpecification",
"EntertainmentBusiness",
"EntryPoint",
"Enumeration",
"Episode",
"Event",
"EventReservation",
"EventStatusType",
"EventVenue",
"ExerciseAction",
"ExerciseGym",
"ExhibitionEvent",
"FastFoodRestaurant",
"Festival",
"FilmAction",
"FinancialProduct",
"FinancialService",
"FindAction",
"FireStation",
"Flight",
"FlightReservation",
"Float",
"Florist",
"FollowAction",
"FoodEstablishment",
"FoodEstablishmentReservation",
"FoodEvent",
"FoodService",
"FurnitureStore",
"Game",
"GamePlayMode",
"GameServer",
"GameServerStatus",
"GardenStore",
"GasStation",
"GatedResidenceCommunity",
"GenderType",
"GeneralContractor",
"GeoCircle",
"GeoCoordinates",
"GeoShape",
"GiveAction",
"GolfCourse",
"GovernmentBuilding",
"GovernmentOffice",
"GovernmentOrganization",
"GovernmentPermit",
"GovernmentService",
"GroceryStore",
"HVACBusiness",
"HairSalon",
"HardwareStore",
"HealthAndBeautyBusiness",
"HealthClub",
"HighSchool",
"HinduTemple",
"HobbyShop",
"HomeAndConstructionBusiness",
"HomeGoodsStore",
"Hospital",
"Hostel",
"Hotel",
"HotelRoom",
"House",
"HousePainter",
"HowTo",
"HowToDirection",
"HowToItem",
"HowToSection",
"HowToStep",
"HowToSupply",
"HowToTip",
"HowToTool",
"IceCreamShop",
"IgnoreAction",
"ImageGallery",
"ImageObject",
"IndividualProduct",
"InformAction",
"InsertAction",
"InstallAction",
"InsuranceAgency",
"Intangible",
"Integer",
"InteractAction",
"InteractionCounter",
"InternetCafe",
"InvestmentOrDeposit",
"InviteAction",
"Invoice",
"ItemAvailability",
"ItemList",
"ItemListOrderType",
"ItemPage",
"JewelryStore",
"JobPosting",
"JoinAction",
"LakeBodyOfWater",
"Landform",
"LandmarksOrHistoricalBuildings",
"Language",
"LeaveAction",
"LegalService",
"LegislativeBuilding",
"LendAction",
"Library",
"LikeAction",
"LiquorStore",
"ListItem",
"ListenAction",
"LiteraryEvent",
"LiveBlogPosting",
"LoanOrCredit",
"LocalBusiness",
"LocationFeatureSpecification",
"LockerDelivery",
"Locksmith",
"LodgingBusiness",
"LodgingReservation",
"LoseAction",
"Map",
"MapCategoryType",
"MarryAction",
"Mass",
"MediaObject",
"MedicalOrganization",
"MeetingRoom",
"MensClothingStore",
"Menu",
"MenuItem",
"MenuSection",
"Message",
"MiddleSchool",
"MobileApplication",
"MobilePhoneStore",
"MonetaryAmount",
"Mosque",
"Motel",
"MotorcycleDealer",
"MotorcycleRepair",
"Mountain",
"MoveAction",
"Movie",
"MovieClip",
"MovieRentalStore",
"MovieSeries",
"MovieTheater",
"MovingCompany",
"Museum",
"MusicAlbum",
"MusicAlbumProductionType",
"MusicAlbumReleaseType",
"MusicComposition",
"MusicEvent",
"MusicGroup",
"MusicPlaylist",
"MusicRecording",
"MusicRelease",
"MusicReleaseFormatType",
"MusicStore",
"MusicVenue",
"MusicVideoObject",
"NGO",
"NailSalon",
"NewsArticle",
"NightClub",
"Notary",
"NoteDigitalDocument",
"Number",
"NutritionInformation",
"OceanBodyOfWater",
"Offer",
"OfferCatalog",
"OfferItemCondition",
"OfficeEquipmentStore",
"OnDemandEvent",
"OpeningHoursSpecification",
"Order",
"OrderAction",
"OrderItem",
"OrderStatus",
"Organization",
"OrganizationRole",
"OrganizeAction",
"OutletStore",
"OwnershipInfo",
"PaintAction",
"Painting",
"ParcelDelivery",
"ParcelService",
"ParentAudience",
"Park",
"ParkingFacility",
"PawnShop",
"PayAction",
"PaymentCard",
"PaymentChargeSpecification",
"PaymentMethod",
"PaymentService",
"PaymentStatusType",
"PeopleAudience",
"PerformAction",
"PerformanceRole",
"PerformingArtsTheater",
"PerformingGroup",
"Periodical",
"Permit",
"Person",
"PetStore",
"Pharmacy",
"Photograph",
"PhotographAction",
"Physician",
"Place",
"PlaceOfWorship",
"PlanAction",
"PlayAction",
"Playground",
"Plumber",
"PoliceStation",
"Pond",
"PostOffice",
"PostalAddress",
"PrependAction",
"Preschool",
"PresentationDigitalDocument",
"PriceSpecification",
"Product",
"ProductModel",
"ProfessionalService",
"ProfilePage",
"ProgramMembership",
"PropertyValue",
"PropertyValueSpecification",
"PublicSwimmingPool",
"PublicationEvent",
"PublicationIssue",
"PublicationVolume",
"QAPage",
"QualitativeValue",
"QuantitativeValue",
"Quantity",
"Question",
"QuoteAction",
"RVPark",
"RadioChannel",
"RadioClip",
"RadioEpisode",
"RadioSeason",
"RadioSeries",
"RadioStation",
"Rating",
"ReactAction",
"ReadAction",
"RealEstateAgent",
"ReceiveAction",
"Recipe",
"RecyclingCenter",
"RegisterAction",
"RejectAction",
"RentAction",
"RentalCarReservation",
"ReplaceAction",
"ReplyAction",
"Report",
"Reservation",
"ReservationPackage",
"ReservationStatusType",
"ReserveAction",
"Reservoir",
"Residence",
"Resort",
"Restaurant",
"RestrictedDiet",
"ResumeAction",
"ReturnAction",
"Review",
"ReviewAction",
"RiverBodyOfWater",
"Role",
"RoofingContractor",
"Room",
"RsvpAction",
"RsvpResponseType",
"SaleEvent",
"ScheduleAction",
"ScholarlyArticle",
"School",
"ScreeningEvent",
"Sculpture",
"SeaBodyOfWater",
"SearchAction",
"SearchResultsPage",
"Season",
"Seat",
"SelfStorage",
"SellAction",
"SendAction",
"Series",
"Service",
"ServiceChannel",
"ShareAction",
"ShoeStore",
"ShoppingCenter",
"SingleFamilyResidence",
"SiteNavigationElement",
"SkiResort",
"SocialEvent",
"SocialMediaPosting",
"SoftwareApplication",
"SoftwareSourceCode",
"SomeProducts",
"Specialty",
"SportingGoodsStore",
"SportsActivityLocation",
"SportsClub",
"SportsEvent",
"SportsOrganization",
"SportsTeam",
"SpreadsheetDigitalDocument",
"StadiumOrArena",
"State",
"SteeringPositionValue",
"Store",
"StructuredValue",
"SubscribeAction",
"SubwayStation",
"Suite",
"SuspendAction",
"Synagogue",
"TVClip",
"TVEpisode",
"TVSeason",
"TVSeries",
"Table",
"TakeAction",
"TattooParlor",
"Taxi",
"TaxiReservation",
"TaxiService",
"TaxiStand",
"TechArticle",
"TelevisionChannel",
"TelevisionStation",
"TennisComplex",
"Text",
"TextDigitalDocument",
"TheaterEvent",
"TheaterGroup",
"Thing",
"Ticket",
"TieAction",
"Time",
"TipAction",
"TireShop",
"TouristAttraction",
"TouristInformationCenter",
"ToyStore",
"TrackAction",
"TradeAction",
"TrainReservation",
"TrainStation",
"TrainTrip",
"TransferAction",
"TravelAction",
"TravelAgency",
"TypeAndQuantityNode",
"URL",
"UnRegisterAction",
"UnitPriceSpecification",
"UpdateAction",
"UseAction",
"UserBlocks",
"UserCheckins",
"UserComments",
"UserDownloads",
"UserInteraction",
"UserLikes",
"UserPageVisits",
"UserPlays",
"UserPlusOnes",
"UserTweets",
"Vehicle",
"VideoGallery",
"VideoGame",
"VideoGameClip",
"VideoGameSeries",
"VideoObject",
"ViewAction",
"VisualArtsEvent",
"VisualArtwork",
"Volcano",
"VoteAction",
"WPAdBlock",
"WPFooter",
"WPHeader",
"WPSideBar",
"WantAction",
"WarrantyPromise",
"WarrantyScope",
"WatchAction",
"Waterfall",
"WearAction",
"WebApplication",
"WebPage",
"WebPageElement",
"WebSite",
"WholesaleStore",
"WinAction",
"Winery",
"WriteAction",
"Zoo"
    ];



    $( "#concept" ).autocomplete({
          source: labels,
          select: function( event, ui ) {
            console.log('item is chosen');
            //console.log($("#concept").val());
            console.log(ui.item.value);

            $.get( "get_properties?concept="+ui.item.value, function( data ) {
              //alert( "Load was performed." );
              console.log(data['properties']);
              properties = data['properties'];
              console.log(properties);


              $( ".property" ).autocomplete({
                source: properties
              });// auto complete
            });//get
           }// select function
    });//auto complete

} );


</script>
{%endblock%}


{% block body %}

<br>

<form method="POST" action="generate_mappings"> {% csrf_token %}

    <p>detected iterator: {{iterator}}</p>
    <input type="hidden" name="dataset" value="{{dataset}}"/>
<div class="ui-widget">
    <label for="concept">Choose the concept of this file: </label>
    <input id="concept" class="form-control" name="entity_class">
</div>
<hr>

    <!--<input type="hidden" name="file_name" value="{{file_name}}"/>-->
    <input type="hidden" name="distribution" value="{{distribution}}"/>



    <div class="form-group">
        <label for="entity_column">Entity Column (primary key)</label>
        <select name="entity_column" class="form-control" id="entity_column">
            {%for header in headers%}
            <option value="{{header}}">{{header}}</option>
            {%endfor%}
        </select>
    </div>
    <!--<input type="hidden" name="entity_column" value="myentitycolumn"/>-->

    <table class="table">
        <thead>
        <tr>
            <th scope="col">Header</th>
            <th scope="col">Schema</th>
        </tr>
        </thead>
        <tbody>

            {%for header in headers%}
            <tr>
                <td>{{header}}</td>
                <td><input type="text" name="form_val_{{forloop.counter0}}" class="property"></td>
            </tr>
                <input type="hidden" name="form_key_{{forloop.counter0}}" value="{{header}}"/>
            {%endfor%}
        </tbody>
    </table>
    <input type="submit" class="form-control btn btn-primary" name="Create" value="Create"/>
</form>
{%endblock%}